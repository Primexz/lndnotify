log_level: "info"  # Log level: panic, fatal, error, warn, info, debug, trace

# LND connection settings
lnd:
  host: "localhost"
  port: 10009
  tls_cert_path: "~/.lnd/tls.cert"
  macaroon_path: "~/.lnd/data/chain/bitcoin/mainnet/readonly.macaroon"

# Notification settings
notifications:
  providers:
    - url: "discord://token@channel?SplitLines=false"  # Discord webhook URL
      name: "main-discord"
  templates:
    backup_multi_event: |-
      â—ï¸ Channel backup received for {{.NumChanPoints}} channels

      Channel Points:
      {{range .ChanPoints}}- {{.}}
      {{end}}
      Filename: {{.Filename}}
      SHA256: {{.Sha256Sum}}
    channel_close_event: |-
      ðŸ”’ Channel closed with {{.PeerAlias}}
      Capacity {{.Capacity}} sats
      Settled balance {{.SettledBalance}} sats

      Channel Point: {{.ChannelPoint}}
      Close Type: {{if eq .CloseType 0}}ðŸ¤ Cooperatively {{if .CloseInitiator}}Local{{else}}Remote{{end}}{{else if eq .CloseType 1}}ðŸ”´ Force Local{{else if eq .CloseType 2}}ðŸ”´ Force Remote{{else if eq .CloseType 3}}ðŸš¨ Breach{{else}}ðŸ’€ Other{{end}}
    channel_closing_event: |-
      â³ Closing channel with {{.PeerAlias}}
      Capacity {{.Capacity}} sats
      Limbo: {{.LimboBalance}} sats

      Closing TxID: {{.ClosingTxid}}
      Raw TX: {{.ClosingTxHex}}
    channel_fee_change_event: |-
      âœï¸ Fee change detected on channel with {{.PeerAlias}} ({{.PeerPubkeyShort}})
      Capacity: {{.Capacity}} sats

      Fee Rate: {{if ne .OldFeeRate .NewFeeRate}}{{.OldFeeRate}} -> {{.NewFeeRate}} ({{.FeeRateChange}} ppm, {{.FeeRateChangePercent}}){{else}}{{.OldFeeRate}}{{end}} ppm
      Base Fee: {{if ne .OldBaseFee .NewBaseFee}}{{.OldBaseFee}} -> {{.NewBaseFee}} ({{.BaseFeeChange}} sats, {{.BaseFeeChangePercent}}){{else}}{{.OldBaseFee}}{{end}} sats
      Inbound Fee Rate: {{if ne .OldInboundFeeRate .NewInboundFeeRate}}{{.OldInboundFeeRate}} -> {{.NewInboundFeeRate}} ({{.InboundFeeRateChange}} ppm, {{.InboundFeeRateChangePercent}}){{else}}{{.OldInboundFeeRate}}{{end}} ppm
      Inbound Base Fee: {{if ne .OldInboundBaseFee .NewInboundBaseFee}}{{.OldInboundBaseFee}} -> {{.NewInboundBaseFee}} ({{.InboundBaseFeeChange}} sats, {{.InboundBaseFeeChangePercent}}){{else}}{{.OldInboundBaseFee}}{{end}} sats
    channel_open_event: |-
      ðŸš€ Channel opened with {{.PeerAlias}}
      Capacity {{.Capacity}} sats"
    channel_opening_event: "{{if .Initiator}}â³ Opening new {{.Capacity}} sats channel to {{.PeerAlias}}{{else}}â³ Accepting new {{.Capacity}} sats channel from {{.PeerAlias}}{{end}}"
    failed_htlc_event: |-
      âŒ Failed HTLC of {{.Amount}} sats
      {{.InChanAlias}} -> {{.OutChanAlias}}
      Reason: {{.WireFailure}} ({{.FailureDetail}})
      Actual Outbound: {{.OutChanLiquidity}} sats
      Missed Fee: {{.MissedFee}} sats
    forward_event: |-
      ðŸ’° Forwarded {{.Amount}} sats
      {{.PeerAliasIn}} -> {{.PeerAliasOut}}
      Earned {{.Fee}} sats ({{.FeeRate}} ppm)
    invoice_settled_event: "ðŸ’µ Invoice settled: {{or .Memo \"No Memo\"}} for {{.Value}} sats"
    keysend_event: |-
      ðŸ“¨ Keysend received:

      {{.Msg}}

      Channel In: {{.InChanAlias}} ({{.InChanId}})
    payment_succeeded_event: |-
      âš¡ï¸ Payment: {{.Amount}} sats (fee: {{.Fee}}, {{.FeeRate}} ppm) to {{.Receiver}}{{if .Memo}} - {{.Memo}}{{end}}{{range .HtlcInfo}}
      Route: {{range $i, $hop := .HopInfo}}{{if $i}} -> {{end}}{{$hop.Alias}} ({{$hop.FeeRate}} ppm){{end}}{{end}}
      Hash: {{.PaymentHash}}
    peer_offline_event: "{{if .PeerAlias}}âš ï¸ Peer {{.PeerAlias}} ({{.PeerPubkeyShort}}) went offline{{else}}âš ï¸ Peer {{.PeerPubKey}} went offline{{end}}"
    peer_online_event: "{{if .PeerAlias}}âœ… Peer {{.PeerAlias}} ({{.PeerPubkeyShort}}) is online{{else}}âœ… Peer {{.PeerPubKey}} is online{{end}}"
    rebalancing_succeeded_event: |-
      {{range .HtlcInfo}}â˜¯ï¸ Rebalanced {{.Amount}} sats {{.FirstHop}} â†’ {{.PenultHop}}. Fee: {{.Fee}} sats ({{.FeeRate}} ppm), Route: {{range $i, $hop := .HopInfo}}{{if $i}} -> {{end}}{{$hop.Alias}} ({{$hop.FeeRate}} ppm){{end}}

      {{end}}
    on_chain_mempool_event: |-
      ðŸ”— Discovered On-Chain transaction in mempool: {{.Amount}} sats
      Fee: {{.TotalFees}} sats

      Outputs:
      {{range .Outputs}}- {{.Amount}} sats to {{.Address}} ({{.OutputType}}{{if .IsOurAddress}}, ours{{end}})
      {{end}}

      View on explorer: {{.TransactionURL}}
      TxID: {{.TxHash}}
    on_chain_confirmed_event: |-
      ðŸ”— Confirmed On-Chain transaction: {{.Amount}} sats
      Fee: {{.TotalFees}} sats

      View on explorer: {{.TransactionURL}}
      TxID: {{.TxHash}}
    chain_sync_lost_event: "âš ï¸ Chain is out of sync since {{.Duration}}"
    chain_sync_restored_event: "âœ… Chain is back in sync after {{.Duration}}"
    channel_status_up_event: |-
      ðŸŸ¢ Channel with {{.PeerAlias}} ({{.PeerPubkeyShort}}) is back online after {{.Duration}}
      Capacity {{.Capacity}} sats
    channel_status_down_event: |-
      ðŸ”´ Channel with {{.PeerAlias}} ({{.PeerPubkeyShort}}) is down since {{.Duration}}
      Capacity {{.Capacity}} sats
    tls_cert_expiry_event: "âš ï¸ LND TLS certificate is expiring soon on {{.ExpiryDate}} (in {{.TimeUntilExpiry}})"
    wallet_state_event: "ðŸ‘› Wallet state changed: {{.OldState}} -> {{.NewState}}"
    healthy_event: âœ… LND node is healthy again
    unhealthy_event: |-
      âŒ LND node is unhealthy
      Error: {{.Err}}
    lnd_update_available_event: |-
      â¬†ï¸ New LND version available: {{.LatestVersion}}
      You are currently running version: {{.CurrentVersion}}
    alias_changed_event: "ðŸ“ Alias changed: {{.OldAlias}} -> {{.NewAlias}}"

  formatting:
    locale: "en-US"  # Language for number formatting (e.g. "en-US" for English, "de-DE" for German)
  batching:
    enabled: false  # Enable batching of notifications
    flush_interval: "5s"  # How often to flush batched notifications (e.g., "5s", "1m", "30s")
    max_size: 10  # Maximum number of notifications to batch before flushing immediately

# Event settings (feature flags)
events:
  backup_events: true # Enable channel backup notifications (file attachment if supported for provider)
  channel_events: true # Enable channel events (open/close) notifications
  failed_htlc_events: true # Enable failed HTLC notifications
  forward_events: true # Enable payment forwarding notifications
  invoice_events: true # Enable invoice settled notifications
  keysend_events: true # Enable keysend notifications
  payment_events: true # Enable outgoing payment succeeded notifications
  rebalancing_events: true # Enable rebalancing succeeded notifications
  status_events: true # Enable status change notifications (startup/shutdown)
  on_chain_events: true # Enable on-chain transaction notifications
  chain_sync_events: true # Enable chain sync status notifications (lost sync/restored)
  channel_status_events: true # Enable channel status notifications (channel up/down)
  tls_cert_expiry_events: true # Enable TLS certificate expiry notifications
  peer_events: false # Enable peer events (online/offline) notifications
  wallet_state_events: true # Enable wallet state change notifications
  health_events: true # Enable LND health status notifications
  lnd_update_events: true # Enable LND update available notifications
  channel_fee_events: true # Enable channel fee change notifications
  htlc_expiration_events: true # Enable HTLC expiration notifications
  alias_changed_events: true # Enable alias changed notifications

# Event configuration (specific settings for each event type)
event_config:
  failed_htlc_event:
    min_amount: 0  # Minimum amount in sats to notify about failed HTLC event
  forward_event:
    min_amount: 0  # Minimum outgoing amount in sats to notify about forward event
  invoice_event:
    min_amount: 0  # Minimum amount in sats to notify about invoice event
    skip_keysend: true  # Skip keysend invoices
  payment_event:
    min_amount: 0  # Minimum amount in sats to notify about payment succeeded event
  rebalancing_event:
    min_amount: 0  # Minimum amount in sats to notify about rebalancing
  on_chain_event:
    min_amount: 0  # Minimum amount in sats to notify about on-chain transaction
    transaction_url_template: "https://mempool.space/tx/{{.TxHash}}"  # URL template for linking to transaction details on a block explorer
  chain_lost_event:
    threshold: 5m  # Duration of being out of sync before sending a notification
    warning_interval: 15m  # Interval between repeated warnings while still out of sync
  channel_status_event:
    min_downtime: 10m  # Minimum downtime duration before sending a channel down notification
  htlc_expiration_event:
    remaining_blocks: 144  # Notify when HTLCs are expiring within ~24 hours

